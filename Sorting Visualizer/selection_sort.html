<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Selection Sort Visualizer</title>
  <style>
    /* Improved modern CSS, adapted from your Bubble Sort file */
    body {
      background: #111827;
      color: #f3f4f6;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
    }
    #main {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: flex-start;
      gap: 38px;
      margin: 40px 0;
      flex-wrap: wrap;
    }
    #visualizer, #codebox {
      background: #21273a;
      border-radius: 12px;
      padding: 26px 18px 18px 18px;
      box-shadow: 0 4px 24px #0003;
    }
    #visualizer { width: 610px; min-width: 350px; }
    #array {
      display: flex;
      align-items: flex-end;
      height: 280px;
      margin: 34px 0 8px 0;
      background: #181e2b;
      border-radius: 10px;
      transition: background 0.3s;
    }
    #explanation {
      margin-top: 18px;
      font-size: 18px;
      color: #a7ffeb;
      min-height: 28px;
      font-family: 'Fira Mono', monospace;
      text-shadow: 0 1px 8px #096c5e32;
      letter-spacing: .5px;
      transition: color 0.2s;
    }
    .bar {
      flex: 1;
      margin: 0 3px;
      background: linear-gradient(180deg,#22d3ee 0%, #1d4ed8 100%);
      border-radius: 5px 5px 0 0;
      position: relative;
      min-width: 16px;
      transition: background 0.3s, height 0.35s cubic-bezier(.34,1.56,.64,1), box-shadow 0.30s;
      box-shadow: 0 2px 8px #0ef2;
    }
    .bar.comparing {
      background: linear-gradient(180deg,#ffb300 10%,#fa7268 90%);
      box-shadow: 0 2px 14px #fdae1b35;
    }
    .bar.swapping {
      background: linear-gradient(180deg,#9f35fa 10%,#f370b2 100%);
      box-shadow: 0 2px 14px #e17cf942;
    }
    .bar.sorted {
      background: linear-gradient(180deg,#9EDD7D 10%,#2fa94e 90%);
      box-shadow: 0 2px 16px #77df6a66;
    }
    .bar .value {
      position: absolute;
      bottom: 7px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 13px;
      color: #fff;
      text-shadow: 0 1px 6px #000, 0 0 4px #2e2a5c;
      font-weight: bold;
      z-index: 2;
      pointer-events: none;
      letter-spacing: .5px;
      background: rgba(32,36,64,0.22);
      padding: 2px 6px;
      border-radius: 6px;
    }
    .pointers {
      position: absolute;
      top: -23px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 14px;
      font-weight: 800;
      white-space: nowrap;
      z-index: 10;
      letter-spacing: 0.5px;
    }
    .pointers span {
      margin: 0 1.5px;
      padding: 1px 5px;
      border-radius: 5px;
      font-size: 13px;
      border: 1.1px solid;
      box-shadow: 0 1px 6px #03e9f4af;
      user-select: none;
    }
    .pointers span.first {
      background: #0ea5e9;
      color: #fff;
      border-color: #0ce;
      box-shadow: 0 1px 6px #0ef2ffba;
    }
    .pointers span.curr {
      background: #6a4eea;
      color: #e1d9fc;
      border-color: #bfa1f9;
      box-shadow: 0 1px 6px #7963e798;
    }
    .pointers span.minptr {
      background: #305726;
      color: #e6ffbb;
      border-color: #77c35d;
      box-shadow: 0 1px 6px #c7fa7a98;
    }
    #controls {
      margin-top: 8px;
      margin-bottom: 10px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
    }
    #controls label,
    #controls input[type=range] {
      margin-bottom: 0;
      font-size: 15.5px;
    }
    #controls button, #controls input[type=range] {
      padding: 6.5px 13px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      background: #374151;
      color: #fff;
      cursor: pointer;
      transition: background 0.17s, color 0.17s, box-shadow 0.18s;
      box-shadow: 0 2px 4px #0002;
    }
    #controls button:hover {
      background: #0ea5e9;
      color: #fff;
      box-shadow: 0 4px 15px #49e9fa57;
    }
    #controls input[type=range] {
      accent-color: #3b82f6;
      background: #27273c;
      border-radius: 5px;
      margin-left: 8px;
      width: 90px;
      height: 4px;
    }
    #inputbox {
      margin-top: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 15px;
    }
    #inputbox input {
      width: 156px;
      padding: 7px 8px;
      border-radius: 5px;
      border: 1.2px solid #1251b0;
      font-size: 15px;
      margin-right: 5px;
      background: #20243d;
      color: #c1d1fb;
      outline: none;
      transition: border 0.16s;
    }
    #inputbox input:focus {
      border-color: #22d3ee;
      background: #181d37;
    }
    #inputbox button {
      padding: 7px 13px;
      font-size: 15px;
      border-radius: 5px;
      background: #1847a3;
      color: #eee;
      border: none;
      cursor: pointer;
      transition: background 0.17s;
    }
    #inputbox button:hover {
      background: #2563eb;
    }
    #codebox { min-width:320px; max-width: 500px; }
    #codebox strong {
      font-size: 17.5px;
      color: #93e7fc;
      letter-spacing: 0.5px;
    }
    pre {
      margin: 0;
      padding-top: 5px;
      font-family: 'Fira Mono', 'Consolas', 'monospace';
      font-size:16px;
      line-height: 1.65;
      color: #e0e7ef;
      background: none;
      white-space: pre-wrap;
      word-break: break-word;
      overflow-x: auto;
      max-width: 100%;
    }
    .codeline {
      display:block;
      padding: 0 8px;
      border-radius:6px;
      transition: background 0.19s;
      white-space: pre-wrap !important;
    }
    .highlight {
      background: #155ab5;
      color: #ffeebd;
    }
    a {
      color: #6cf0fe;
      text-decoration: none;
      font-size: 16px;
      padding-left: 14px;
    }
    #purecodebox {
      background:#232c4d;
      margin: 42px auto 44px auto;
      border-radius:13px;
      max-width:1000px;
      padding:26px 23px 17px 23px;
      box-shadow: 0 8px 32px #0ecdee20;
      border: 1.8px solid #0f466b28;
    }
    #purecodebox strong {
      font-size:20px;
      font-weight: 700;
      color: #93e7fc;

      display: block;
      margin-bottom: 12px;
      letter-spacing: .3px;
    }
    .codes-list {
      display: flex; 
      flex-wrap: wrap; 
      gap: 30px;
      justify-content: flex-start;
    }
    .codes-list pre {
      font-size: 13.7px;
      background:#191e2b;
      border-radius: 7px;
      padding:14px 12px 12px 12px;
      margin:7px 0 0 0;
      min-width: 190px;
      max-width: 100%;
      border: 1.2px solid #2d3b54;
      color: #b0e0fa;
      overflow-x: auto;
    }
    .codes-list .lang {
      font-size: 15.5px;
      margin-bottom: 4px;
      color: #93e7fc;

      letter-spacing: 0.2px;
    }
    .codes-row {
      display: flex;
      gap: 36px;
      margin-bottom: 16px;
    }
    .codes-row > div {
      flex: 1 1 0;
      min-width: 180px;
      max-width: 100%;
    }
    @media only screen and (max-width: 1000px) {
      #main { flex-direction: column; gap: 16px;}
      #visualizer { width: 95vw; min-width: 0; }
      #codebox { max-width: 100vw; }
    }
    @media (max-width: 720px) {
      .codes-row { flex-direction: column; gap: 12px; }
    }
  </style>
</head>
<body>
  <a href="index.html">← Back to main index</a>
  <div id="main">
    <div id="visualizer">
      <div id="controls">
        <label>Array size: <input id="sizeSlider" type="range" min="7" max="30" value="14"></label>
        <button onclick="resetArray()">Reset</button>
        <button onclick="start()">▶ Play</button>
        <button onclick="pause()">⏸ Pause</button>
        <button onclick="prevStep()">⏮ Back</button>
        <button onclick="nextStep()">⏭ Next</button>
        <label>Speed: <input id="speedSlider" type="range" min="30" max="600" value="200"></label>
      </div>
      <div id="inputbox">
        <label for="arrayInput">Custom array: </label>
        <input type="text" id="arrayInput" placeholder="e.g. 5,2,9,1,7">
        <button onclick="useCustomArray()">Use Custom Array</button>
      </div>
      <div id="array"></div>
      <div id="explanation"></div>
    </div>
    <div id="codebox">
      <strong>Selection Sort <span style="font-size:13px; color:#999; font-weight:normal">(JS visualized with highlighting)</span></strong>
      <pre id="codearea"></pre>
    </div>
  </div>

  <div id="purecodebox">
    <strong>Pure Selection Sort in Java / C++ / Python / JavaScript</strong>
    <div class="codes-list">
      <div class="codes-row">
        <div>
          <div class="lang">Java</div>
          <pre>public static void selectionSort(int[] arr) {
    int n = arr.length;
    for (int i = 0; i < n - 1; i++) {
        int minIdx = i;
        for (int j = i + 1; j < n; j++) {
            if (arr[j] < arr[minIdx]) {
                minIdx = j;
            }
        }
        int temp = arr[i];
        arr[i] = arr[minIdx];
        arr[minIdx] = temp;
    }
}</pre>
        </div>
        <div>
          <div class="lang">C++</div>
          <pre>void selectionSort(vector&lt;int&gt;& arr) {
    int n = arr.size();
    for (int i = 0; i < n - 1; i++) {
        int minIdx = i;
        for (int j = i + 1; j < n; j++) {
            if (arr[j] < arr[minIdx]) {
                minIdx = j;
            }
        }
        swap(arr[i], arr[minIdx]);
    }
}</pre>
        </div>
      </div>
      <div class="codes-row">
        <div>
          <div class="lang">Python</div>
          <pre>def selection_sort(arr):
    n = len(arr)
    for i in range(n - 1):
        min_idx = i
        for j in range(i + 1, n):
            if arr[j] < arr[min_idx]:
                min_idx = j
        arr[i], arr[min_idx] = arr[min_idx], arr[i]
</pre>
        </div>
        <div>
          <div class="lang">JavaScript</div>
          <pre>function selectionSort(arr) {
  let n = arr.length;
  for (let i = 0; i < n - 1; i++) {
    let minIdx = i;
    for (let j = i + 1; j < n; j++) {
      if (arr[j] < arr[minIdx]) {
        minIdx = j;
      }
    }
    [arr[i], arr[minIdx]] = [arr[minIdx], arr[i]];
  }
}
</pre>
        </div>
      </div>
    </div>
  </div>

  <div id="info-section" style="background:#1f2937; color:#e3f7fa; border-radius:12px; max-width:900px; margin:28px auto 18px auto; padding:24px 22px; box-shadow:0 4px 18px #1e293b30;">
    <h2 style="margin-top:0;       color: #93e7fc;">Selection Sort: Complexity & Key Points</h2>
    <ul style="margin:0 0 12px 24px; font-size:16px;">
      <li><strong>Worst-case time complexity:</strong> <code>O(n²)</code></li>
      <li><strong>Best-case time complexity:</strong> <code>O(n²)</code> (Selection Sort always scans unsorted part)</li>
      <li><strong>Average-case time complexity:</strong> <code>O(n²)</code></li>
      <li><strong>Space complexity:</strong> <code>O(1)</code> (in-place)</li>
    </ul>
    <ul style="margin:0 0 0 24px; font-size:16px;">
      <li>Simple algorithm but <strong>not efficient for large arrays</strong>.</li>
      <li>Selects the <strong>minimum value</strong> from unsorted part of array and swaps it to its correct position in each pass.</li>
      <li>Always performs <code>O(n²)</code> comparisons regardless of the array's initial order.</li>
      <li>Not a <strong>stable</strong> sort unless specifically modified; can change the relative order of equal elements.</li>
      <li>Good for explanation and learning, but rarely used in real-world applications.</li>
    </ul>
  </div>

<script>
const codeLines = [
  "async function selectionSort(array, render, sleep) {",
  "  let n = array.length;",
  "  for (let i = 0; i < n-1; i++) {",
  "    let minIdx = i;",
  "    render([i], Array.from({length: i},(_,k)=>k), {first: i, curr: i, min: minIdx});",
  "    await sleep();",
  "    for (let j = i+1; j < n; j++) {",
  "      render([j], Array.from({length: i},(_,k)=>k), {first: i, curr: j, min: minIdx});",
  "      await sleep();",
  "      if (array[j] < array[minIdx]) {",
  "        minIdx = j;",
  "        render([j], Array.from({length: i},(_,k)=>k), {first: i, curr: j, min: minIdx});",
  "        await sleep();",
  "      }",
  "    }",
  "    [array[i], array[minIdx]] = [array[minIdx], array[i]];",
  "    render([i,minIdx], Array.from({length:i+1},(_,k)=>k), {first: i, curr: i, min: minIdx}, true);",
  "    await sleep();",
  "  }",
  "  render([], Array.from({length:n},(_,k)=>k), {});",
  "}"
];

function displayCode(hl) {
  codearea.innerHTML = '';
  codeLines.forEach((l,i) => {
    const el = document.createElement('span');
    el.className = 'codeline' + (i===hl ? ' highlight':'');
    el.textContent = l;
    codearea.appendChild(el);
    codearea.appendChild(document.createTextNode('\n'));
  });
}

let array = [], states = [], stateIdx = 0, animating = false, paused = false, timeoutID = null;
const arrayContainer = document.getElementById('array');
const sizeSlider = document.getElementById('sizeSlider');
const speedSlider = document.getElementById('speedSlider');
const codearea = document.getElementById('codearea');
const explanationBox = document.getElementById('explanation');

function randomArray(size) {
  return Array.from({length: size}, () => Math.floor(Math.random()*180)+40);
}

function renderArray(comparing=[], sorted=[], pointerIndices={}, swapping=false) {
  arrayContainer.innerHTML = '';
  array.forEach((val, idx) => {
    const bar = document.createElement('div');
    bar.className = 'bar';
    bar.style.height = val + 'px';

    let pointerLabels = [];
    if (pointerIndices.first === idx) pointerLabels.push('<span class="first">first</span>');
    if (pointerIndices.curr === idx) pointerLabels.push('<span class="curr">curr</span>');
    if (pointerIndices.min === idx) pointerLabels.push('<span class="minptr">min</span>');

    if (pointerLabels.length > 0) {
      const pointersDiv = document.createElement('div');
      pointersDiv.className = 'pointers';
      pointersDiv.innerHTML = pointerLabels.join(' ');
      bar.appendChild(pointersDiv);
    }
    bar.innerHTML += `<div class="value">${val}</div>`;

    if (comparing && comparing.includes(idx)) bar.classList.add('comparing');
    if (swapping && comparing && comparing.includes(idx)) bar.classList.add('swapping');
    if (sorted && sorted.includes(idx)) bar.classList.add('sorted');
    arrayContainer.appendChild(bar);
  });
}

function snapshot(arr, comparing, sorted, pointerIndices={}, swapping, line, desc='') {
  states.push({
    arr: arr.slice(),
    comparing: comparing.slice ? comparing.slice() : [],
    sorted: sorted.slice ? sorted.slice() : [],
    pointerIndices: {...pointerIndices},
    swapping: !!swapping,
    code: line,
    desc // explanation sentence for this step
  });
}

async function captureSelectionSortSteps() {
  const arr = array.slice(), n = arr.length; states.length = 0;
  for (let i = 0; i < n-1; i++) {
    let minIdx = i;
    snapshot(arr, [i], Array.from({length:i},(_,k)=>k), {first:i, curr:i, min:minIdx}, false, 4,
      `Start pass: fix position ${i} (${arr[i]})`
    );
    snapshot(arr, [i], Array.from({length:i},(_,k)=>k), {first:i, curr:i, min:minIdx}, false, 5,
      `Assume min = ${arr[minIdx]} (at index ${minIdx})`
    );
    for (let j = i+1; j < n; j++) {
      snapshot(arr, [j], Array.from({length:i},(_,k)=>k), {first:i, curr:j, min:minIdx}, false, 7,
        `Compare ${arr[j]} with min ${arr[minIdx]}`
      );
      snapshot(arr, [j], Array.from({length:i},(_,k)=>k), {first:i, curr:j, min:minIdx}, false, 8, '');
      if (arr[j] < arr[minIdx]) {
        minIdx = j;
        snapshot(arr, [j], Array.from({length:i},(_,k)=>k), {first:i, curr:j, min:minIdx}, false, 10,
          `New min: ${arr[minIdx]} at index ${minIdx}`
        );
        snapshot(arr, [j], Array.from({length:i},(_,k)=>k), {first:i, curr:j, min:minIdx}, false, 11, '');
      }
    }
    let swapMsg = (minIdx === i)
      ? `No smaller element, no swap`
      : `Swap ${arr[i]} & ${arr[minIdx]}`;
    [arr[i], arr[minIdx]] = [arr[minIdx], arr[i]];
    snapshot(arr, [i,minIdx], Array.from({length:i+1},(_,k)=>k), {first:i, curr:i, min:minIdx}, true, 14, swapMsg);
    snapshot(arr, [i,minIdx], Array.from({length:i+1},(_,k)=>k), {first:i, curr:i, min:minIdx}, false, 15, `Position ${i} fixed`);
  }
  snapshot(arr, [], Array.from({length:n},(_,k)=>k), {}, false, 17, 'All sorted!');
}

function resetArray() {
  if (animating) return;
  array = randomArray(Number(sizeSlider.value));
  renderArray();
  displayCode(-1);
  states = []; stateIdx = 0;
  explanationBox.textContent = '';
}
function useCustomArray() {
  const val = document.getElementById('arrayInput').value;
  const customArr = val.split(',').map(s => +s.trim()).filter(x => !isNaN(x));
  if (customArr.length < 2) {
    alert('Please enter at least 2 numbers, comma separated.');
    return;
  }
  array = customArr;
  renderArray();
  displayCode(-1);
  states = []; stateIdx = 0;
  explanationBox.textContent = '';
}
async function start() {
  if (animating) return;
  animating = true; paused = false; states = []; stateIdx = 0;
  await captureSelectionSortSteps();
  stateIdx = 0;
  nextStep();
}
function pause() {
  paused = true; animating = false;
  if(timeoutID) clearTimeout(timeoutID);
}
function nextStep() {
  if (stateIdx >= states.length) {
    animating = false;
    displayCode(-1);
    explanationBox.textContent = '';
    return;
  }
  const s = states[stateIdx];
  array = s.arr.slice();
  renderArray(s.comparing, s.sorted, s.pointerIndices || {}, s.swapping);
  displayCode(s.code);
  explanationBox.textContent = s.desc || '';
  stateIdx++;
  if (animating && !paused) {
    timeoutID = setTimeout(nextStep, 640 - Number(speedSlider.value));
  }
}
function prevStep() {
  if (stateIdx > 1) stateIdx-=2;
  if (states.length) nextStep();
}
sizeSlider.addEventListener('input', resetArray);
//const explanationBox = document.getElementById('explanation');
resetArray();
displayCode(-1);
</script>
</body>
</html>
